using bc.common
using bc.planes
using bc.actors
using bc.actors.Ego
using bc.wildlife
using bc.wildlife.Diet
using bc.elementals

// use with `$[name]`
const PI = 3.141592
const TAU = 6.283185

Prefab ActorPrefab {
    - Position
    - Destination
    - Condition
}

Prefab WolfPackPrefab : ActorPrefab {
    - (Ego, EgoPredator)
    - (Diet, Meat)
    - Condition {maxHealth: 30, health: 30, maxStamina: 150, stamina: 150}
    - Group {count: 10}
    - bc.actors.GrowthRate {stepsRequired: 360 * 24, progress: 0}
    - ActorSize {ACTOR_SIZE_AVERAGE}
}

Prefab BisonHerdPrefab : ActorPrefab {
    - (Ego, EgoGrazer)
    - (Diet, Grasses)
    - Condition {maxHealth: 100, health: 100, maxStamina: 25, stamina: 25}
    - Group {count: 100}
    - bc.actors.GrowthRate {stepsRequired: 360 * 24, progress: 0}
    - ActorSize {ACTOR_SIZE_LARGE}
}

Prefab TectonicSpiritPrefab {
    - ElementalSpirit
    - (Ego, EgoTectonicSpirit)
    - OVERRIDE|Position
    - OVERRIDE|Destination
    - OVERRIDE|AngleRadians
    - OVERRIDE|Elevation
    - OVERRIDE|SpiritPower
    - SpiritPower {maxValue: 65535}
    - SpiritLifetime {youngSteps: 40, matureSteps: 200, oldSteps: 40}
    - PlateShiftStrength {left: 50, right: -50}
    - AngleRadians {0}
}

Prefab CollidingPlatesPrefab : TectonicSpiritPrefab {
    - (RandomizeInt, PlateShiftStrength.left) {min: 50, max: 100}
    - (RandomizeInt, PlateShiftStrength.right) {min: 50, max: 100}
    - (RandomizeFloat, PlateShiftStrength.falloff) {min: 8, max: 16}
    - (RandomizeFloat, AngleRadians) {min: 0, max: $TAU}
}

Prefab SplittingPlatesPrefab : TectonicSpiritPrefab {
    - (RandomizeInt, PlateShiftStrength.left) {min: -100, max: -50}
    - (RandomizeInt, PlateShiftStrength.right) {min: -100, max: -50}
    - (RandomizeFloat, PlateShiftStrength.falloff) {min: 4, max: 10}
    - (RandomizeFloat, AngleRadians) {min: 0, max: $TAU}
}

Prefab SmallPlatesPrefab : TectonicSpiritPrefab {
    - (RandomizeInt, PlateShiftStrength.left) {min: -20, max: 20}
    - (RandomizeInt, PlateShiftStrength.right) {min: -20, max: 20}
    - (RandomizeFloat, PlateShiftStrength.falloff) {min: 6, max: 8}
    - (RandomizeFloat, AngleRadians) {min: 0, max: $TAU}
}

Prefab TestPlatesPrefab : TectonicSpiritPrefab {
    - SpiritLifetime {youngSteps: 40, matureSteps: 100, oldSteps: 40}
    - PlateShiftStrength {left: -25, right: 30, falloff: 8}
}

Prefab VolcanoSpiritPrefab {
    - ElementalSpirit
    - (Ego, EgoVolcanoSpirit)
    - OVERRIDE|Position
    - OVERRIDE|Elevation
    - SpiritPower {maxValue: 65535}
}

faultlines_spawner1 {
    - Spawner{prefab: CollidingPlatesPrefab, count: 4, oneShot: true}
    - (IsOn, Overworld)
}

faultlines_spawner2 {
    - Spawner{prefab: SplittingPlatesPrefab, count: 4, oneShot: true}
    - (IsOn, Overworld)
}

faultlines_spawner3 {
    - Spawner{prefab: SmallPlatesPrefab, count: 24, oneShot: true}
    - (IsOn, Overworld)
}

faultlines_spawner_test {
    - Spawner{prefab: TestPlatesPrefab, count: 0, oneShot: true}
    - (IsOn, Overworld)
}

volcano_spawner {
    - Spawner{prefab: VolcanoSpiritPrefab, count: 0, oneShot: true}
    - (IsOn, Overworld)
}

